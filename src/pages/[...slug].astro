---
import { type CollectionEntry, getCollection } from "astro:content"
import PageLayout from "@/layouts/PageLayout.astro"
import TopLayout from "@/layouts/TopLayout.astro"
import BottomLayout from "@/layouts/BottomLayout.astro"
import { SITE } from "@/consts"
import type { BreadcrumbProp } from '@/types.ts'

// Create the static pages for legal docs and general pages
export async function getStaticPaths() {
	const rechtliches = await getCollection("rechtliches")
	const pages = await getCollection("pages")

	const rechtlichesPaths = rechtliches.map((doc) => ({
		params: { slug: doc.slug },
		props: doc,
	}))

	const pagesPaths = pages.map((doc) => ({
		params: { slug: doc.slug },
		props: doc,
	}))

	return [...rechtlichesPaths, ...pagesPaths]
}

// Get the requested doc
type Props = CollectionEntry<"rechtliches"> | CollectionEntry<"pages">;
const doc = Astro.props
const { title } = doc.data
const { Content } = await doc.render();

const breadcrumbs: BreadcrumbProp[] = [
  {
    title: title,
    href: ''
  }
]
---

<PageLayout title={title} description={`${title} for ${SITE.TITLE}`} breadcrumbs={breadcrumbs}>
    <article class="animate">
      <Content />
    </article>
</PageLayout>
